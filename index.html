<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Global Inequality Dashboard (World Bank Data)</title>

  <!-- Vega Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header id="site-header">
    <h1>Economic Inequality and Living Conditions: A Global-to-Malaysia Perspective</h1>
    <p>This poster gives an overview of inequality, prices, poverty, and access to basic amenities using global indicators alongside Malaysiaâ€™s latest district-level statistics. It is designed to help you compare patterns across places and time, and to quickly spot where outcomes are strong and where gaps remain. Explore the charts below to dive into country and district detail.
    </p>
    <div class="meta-chips">
      <span class="chip"><strong>Author:</strong> Michelle Evangelina</span>
      <span class="chip"><strong>Sources:</strong> World Bank (Gini, CPI), Malaysia HIES 2022</span>
    </div>
  </header>

  <!-- ========== GINI MAP SECTION ========== -->
  <div class="section-header center">
    <h2>Global Inequality by Gini Index</h2>
    <p>The Gini Index measures income inequality within countries. A higher score indicates greater inequality in the distribution of income among citizens.</p>
  </div>
  <div class="chart-card center">
    <div class="controls" style="justify-content:center; margin: 0 0 10px 0;">
      <label style="margin-right:12px;">View:</label>
      <label><input type="radio" name="giniView" id="giniWorld" value="world" checked> World</label>
      <label style="margin-left:12px;"><input type="radio" name="giniView" id="giniMalaysia" value="malaysia"> Malaysia</label>
    </div>
    <div id="vis"></div>
  </div>


  <!-- ========== INFLATION CHART SECTION ========== -->
  <div id="inflation-section">
    <div class="section-header center">
      <h2>Inflation Rate Trends (2010â€“2024)</h2>
      <p>Annual percentage change in consumer prices across selected countries (World Bank Data).</p>
    </div>
    
    <div class="inflation-content">
      <!-- Key Insights Container -->
      <div class="key-insights-container">
        <h3>Key Insights</h3>
        <ul>
          <li>Global inflation rose sharply after 2020, reflecting post-pandemic recovery pressures and global supply disruptions.</li>
          <li>Malaysia maintained relatively low and stable inflation thanks to fuel subsidies and government price controls on key food items.</li>
          <li>By 2024, inflation rates were moderating across all regions, showing the lagged effects of global monetary tightening and easing supply chain pressures.</li>
        </ul>
        
        <div class="insights-summary">
          <h4>Malaysia's Performance</h4>
          <div class="stat-item">
            <span class="stat-label">Average Inflation (2010-2024):</span>
            <span class="stat-value">2.1%</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Peak Inflation:</span>
            <span class="stat-value">3.8% (2017)</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Lowest Inflation:</span>
            <span class="stat-value">-1.1% (2020)</span>
          </div>
        </div>
      </div>
      
      <!-- Chart Container -->
      <div class="chart-card right">
        <div id="inflation"></div>
      </div>
    </div>
    
    <!-- Malaysia vs Emerging Markets Inflation Comparison -->
    <div class="inflation-comparison-content">
      <div class="chart-card">
        <div id="malaysia-emerging-inflation"></div>
      </div>
      
      <!-- Key Insights Container -->
      <div class="key-insights-container">
        <h3>Key Insights</h3>
        <ul>
          <li>After the mid-1990s, emerging-market inflation stabilized, converging closer to Malaysia's range due to structural reforms and global economic integration.</li>
          <li>From 2000 onward, both Malaysia and emerging markets maintained single-digit inflation, reflecting improved global price stability.</li>
          <li>The forecast period beyond 2025 suggests continued low and stable inflation for both groups.</li>
        </ul>
      </div>
    </div>
  </div>

  <hr>

  <!-- ========== MALAYSIA DEEP DIVE SECTION ========== -->
  <div class="section-header center">
    <h2>ðŸ‡²ðŸ‡¾ Malaysia Deep Dive: State & District Insights</h2>
    <p>This section explores Malaysia's domestic landscape â€” highlighting variations in well-being, access to basic amenities, and income inequality across states and districts. It provides a closer look at how regional factors shape living conditions and development outcomes nationwide.</p>
  </div>

  <!-- ========== MALAYSIA MAP + AMENITIES SECTION ========== -->
  <div id="amenities-container">

    <!-- TOP RIGHT (now on top): Well-being summary card -->
    <aside id="wellbeing-card" class="chart-card right">
        <div class="wb-info">
          <h2>A summary of well-being by sub-component</h2>
          <p class="wb-date">Data as of 2022</p>
          <p class="wb-desc">Indices summarise changes in quality of life. Values above 100 indicate improvements relative to the year 2000 baseline.</p>
        </div>
        <div class="wb-chart">
          <div id="wellbeing-heatmap"></div>
        </div>
      </aside>
    
    <!-- TOP RIGHT: Amenities chart -->
    <div id="amenities-card" class="chart-card center">
      <div id="amenities-panel">
        <h2>Access to Basic Amenities by State & District</h2>
        <p>Compare changes in access to piped water, sanitation, and electricity across Malaysian districts over time.</p>

        <div class="controls">
          <label for="stateSel">State:</label>
          <select id="stateSel"></select>

          <label for="districtSel">District:</label>
          <select id="districtSel"></select>
        </div>
        <div class="amenities-row">
          <div class="pictogram-card">
            <div id="pictogram"></div>
          </div>
          <div class="chart-card right amenities-chart">
            <div id="amenities"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- BOTTOM LEFT: Scatter Plot -->
    <div id="scatter-panel">
      <h2>Income vs Poverty Rate by District (Malaysia, 2022)</h2>
      <p>Interactive scatter plot showing relationship between household income, expenditure, and poverty rates across Malaysian districts.</p>
      <div class="chart-card left">
        <div id="scatter"></div>
      </div>
    </div>
  </div>

  <hr>

  <!-- ========== JS FILES ========== -->
  <script>
    function renderGini(view) {
      const spec = view === 'malaysia' ? 'charts/malaysia_gini_choropleth.json' : 'charts/giniMap';
      return vegaEmbed('#vis', spec, { actions: false });
    }

    // initial render (World with original overlays/spec)
    renderGini('world');

    // toggle listeners
    document.addEventListener('DOMContentLoaded', function () {
      const worldBtn = document.getElementById('giniWorld');
      const mysBtn = document.getElementById('giniMalaysia');
      if (worldBtn && mysBtn) {
        worldBtn.addEventListener('change', () => { if (worldBtn.checked) renderGini('world'); });
        mysBtn.addEventListener('change', () => { if (mysBtn.checked) renderGini('malaysia'); });
      }
    });
    vegaEmbed("#inflation", "charts/inflationChart.json", { actions: false });
    vegaEmbed("#malaysia-emerging-inflation", "charts/malaysia_emerging_inflation.json", { actions: false });
    vegaEmbed("#scatter", "charts/scatterPlot.json", { actions: false });
    vegaEmbed("#wellbeing-heatmap", "charts/wellbeing_heatmap.json", { actions: false });
    vegaEmbed('#pictogram', 'charts/pictogram_access.json', {actions: false});
  </script>

  <script src="js/amenitiesChart"></script>

</body>
</html>
